directive @oneOf on INPUT_OBJECT

input CreatePostInput {
  title: String!
  content: PostContentInput!
  userId: Int!
}

input CreateUserInput {
  name: String!
}

input ImageContentInput {
  url: String!
  caption: String = null
  dimensions: ImageDimensionsInput = null
}

type ImageContentType {
  url: String!
  caption: String
  dimensions: ImageDimensionsType
}

input ImageDimensionsInput {
  width: Int!
  height: Int!
}

type ImageDimensionsType {
  aspectRatio: String!
  width: Int!
  height: Int!
}

input LinkContentInput {
  url: String!
  title: String!
  description: String = null
}

type LinkContentType {
  url: String!
  title: String!
  description: String
}

type Mutation {
  createUser(input: CreateUserInput!): User!
  createPost(input: CreatePostInput!): Post!
}

type Post {
  id: Int!
  title: String!
  userId: Int!
  content: PostContentType!
}

input PostContentInput @oneOf {
  text: TextContentInput
  image: ImageContentInput
  link: LinkContentInput
}

union PostContentType = TextContentType | ImageContentType | LinkContentType

type Query {
  users: [User!]!
  user(id: Int!): User
  posts: [Post!]!
}

input TextContentInput {
  body: String!
  format: TextFormat! = PLAIN
}

type TextContentType {
  wordCount: Int!
  body: String!
  format: TextFormat!
}

enum TextFormat {
  MARKDOWN
  PLAIN
}

type User {
  id: Int!
  name: String!
  posts: [Post!]!
}